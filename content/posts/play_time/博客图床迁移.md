---
title: "博客图床迁移"
date: 2022-05-01
categories: ["Play"]
tags: ["图床"]
draft: false
---

## 起因

原来博客的图片使用 Jsdelivr 和 github 的方式存储访问，但是最近 Jsdelivr 频繁的被墙，感觉可能在未来的不久会失效，毕竟好多人用来当免费的 CDN（~~比如我~~），也会有人使用其访问些 zz 敏感或其他的文件，被墙了也情有可原，而且 github 的仓库的作用也是用来存储代码而非图床，像我这样的人也导致了仓库的滥用，所以决定找个新的途径。

## 过程

当时在网上找了好久，最后在 loc 上找到了 一个[帖子](https://hostloc.com/thread-807685-1-1.html)，感觉把目前行得通的方法都列出来了。

一、第三方存储

1. github+jsdelivr 或 gitee 可以搭配 PicGo 使用
2. 茎肛互撸娃大佬的鸡霸图床
3. 国内对象存储
4. 使用 Onedrive 或 Google Drive 搭建图床

二、自行搭建

1. （腾讯云轻量香港 or CDN） 反代 （本地 or 大盘鸡）
2. 北岸域名+国内机器
3. 国内机器非标准端口
4. 家宽开通公网 IP 存在家里

三、直接嵌在文档中，图片转 base64，markdown 插入

最后我是选择了良心云的 cos 对象存储，新用户第一年便宜，就算以后续费一年差不多也 70 左右。之前自己有了解过对象存储这一技术，但是当时听闻的是有人被套路云的流量计费给掏空了，这次在良心云的计费方式中找到了按量计费，这也刚好满足了博客图片也不多的需求，更不怕被人把钱包给刷爆了。

上传的方式还是配合 PicGo 上传，又添加了一个[rename-file](https://github.com/liuwave/picgo-plugin-rename-file)插件实现上传路径的命名。因为感觉对象存储给的链接太长，国内没有备案的域名，使用了一个服务器直接域名重定向到对象存储给的域名。

## 结果

宣布从这篇文章开始往后的图片都会用对象存储，之前的文章如果有需要评论或者联系我再补上吧。

### 插曲（避坑）

期间使用对象存储测试图片的时候，发现过一阵子图片就访问不了了，去桶里一看发现空空如也，发生了两次清空也不知道啥原因，最后一次点了下清空存储桶，发现使用方式里有个**生命周期管理**，发现是这玩意自动删除文件，所以记得把**生命周期规则修改一下**。
